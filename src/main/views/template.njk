{% extends "govuk/template.njk" %}
{% from "govuk/components/header/macro.njk" import govukHeader %}
{% from "govuk/components/service-navigation/macro.njk" import govukServiceNavigation %}

{% block head %}
  {% include "webpack/css.njk" %}
{% endblock %}

{% block header %}
  {{ govukHeader() }}

  {% if isLoggedIn %}
    {% if isSuperAdmin %}
      {% set listItems = [
        {
          href: "/courts",
          text: "courts",
          attributes: { id: "courts" },
          active: true if activeCourtPage else false
        },
        {
          href: "/lists",
          text: "lists",
          attributes: { id: "lists" },
          active: true if activeListsPage else false
        },
        {
          href: "/courts/download",
          text: "download csv"
        } if errors|length == 0,
        {
          href: "/courts/add-court",
          text: "add new court",
          attributes: { id: "add-court-nav" },
          active: true if activeAddNewCourtPage else false
        },
        {
          href: "/bulk-update",
          text: "bulk update",
          attributes: { id: "bulk-update" },
          active: true if activeBulkUpdatePage else false
        },
        {
          href: "/audits",
          text: "audits",
          attributes: { id: "audits" },
          active: true if activeAuditPage else false
        },
        {
          href: "/users",
          text: "users",
          attributes: { id: "users" }
        },
        {
          href: "/logout",
          text: "log out",
          attributes: { id: "logout" }
        }
      ] %}
      {% else %}
        {% set listItems = [
          {
            href: "/courts",
            text: "courts",
            attributes: { id: "courts" },
            active: true if activeCourtPage else false
          },
          {
            href: "/courts/download",
            text: "download csv"
          } if errors|length == 0,
          {
            href: "/logout",
            text: "log out",
            attributes: { id: "logout" }
          }
        ] %}
      {% endif %}

    {{ govukServiceNavigation({
      classes: 'pub-navigation',
      serviceUrl: "/",
      navigation: listItems
      }) }}

    {% endif %}
{% endblock %}

{% block pageTitle %}
  Find a court or tribunal - GOV.UK
{% endblock %}

{% block bodyEnd %}
  {# Run JavaScript at end of the <body>, to avoid blocking the initial render. #}
  {% include "webpack/js.njk" %}
{% endblock %}
