{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}
{% from "macros/tabs/macro.njk" import factTabs %}

{% extends "template.njk" %}

{% block pageTitle %}
  Edit Court
{% endblock %}

{% block beforeContent %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-three-quarters">
      <a id="courts" class="govuk-link govuk-link--no-visited-state" href="/courts">courts</a>
    </div>

    <div class="govuk-grid-column-one-quarter">
      <a id="my-account" class="govuk-link govuk-link--no-visited-state" href="#">my account</a>
      <a id="logout" class="govuk-link govuk-link--no-visited-state" href="/logout">log out</a>
    </div>
  </div>

{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      {% if updated %}
        <div class="govuk-panel govuk-panel--confirmation" id="updated-message">
          <h1 class="govuk-panel__title">
            Court information updated
          </h1>
        </div>
      {% endif %}
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-three-quarters">
          <h1 id="court-name" class="govuk-heading-l">Editing - {{ name }}</h1>
        </div>

        <div class="govuk-grid-column-one-quarter">
          <a id="view-in-new-window" class="govuk-link" rel="noreferrer noopener" target="_blank"
             href="{{ factFrontendURL }}/courts/{{ slug }}">View court in new tab</a>
        </div>
      </div>

      <div class="govuk-grid-row">
        <div class="govuk-grid-column-full">
            {% set generalHtml %}
              {% include "./tabs/general.njk" %}
            {% endset -%}
            {% set openingHoursHtml %}
              {% include "./tabs/openingHours.njk" %}
            {% endset -%}
            {% set phoneNumbersHtml %}
               {% include "./tabs/phoneNumbers.njk" %}
            {% endset -%}
            {% set emailsHtml %}
               {% include "./tabs/emails.njk" %}
            {% endset -%}
            {% set courtTypesHtml %}
                {% include "./tabs/types.njk" %}
            {% endset -%}
            {% set postcodesHtml %}
                {% include "./tabs/postcodes.njk" %}
            {% endset -%}
            {% set localAuthoritiesHtml %}
                {% include "./tabs/localAuthorities.njk" %}
            {% endset -%}
<<<<<<< HEAD
            {% set casesHeardHtml %}
                {% include "./tabs/casesHeard.njk" %}
=======
            {% set addressesHtml %}
                {% include "./tabs/addresses.njk" %}
>>>>>>> master
            {% endset -%}

             <input id='slug' type='hidden' value='{{slug}}'></input>

             {% set tabItems = [
                  {
                    label: "General",
                    id: "general",
                    panel: {
                      html: generalHtml
                    }
                  },
                  {
                    label: "Opening Hours",
                    id: "opening-hours",
                    panel: {
                      html: openingHoursHtml
                    }
                  },
                  {
                    label: "Phone Numbers",
                    id: "phone-numbers",
                    panel: {
                      html: phoneNumbersHtml
                    }
                  },
                  {
                    label: "Emails",
                    id: "emails",
                    panel: {
                      html: emailsHtml
                    }
                  },
                  {
                    label: "Types",
                    id: "court-types",
                    panel: {
                      html: courtTypesHtml
                    }
                  },
                  {
<<<<<<< HEAD
                    label: "Cases Heard",
                    id: "cases-heard",
                    panel: {
                      html: casesHeardHtml
=======
                    label: "Addresses",
                    id: "addresses",
                    panel: {
                    html: addressesHtml
>>>>>>> master
                    }
                  }
                  ]%}

              {% set postcodesTab =
                  {
                   label: "Postcodes",
                   id: "postcodes",
                   panel: {
                      html: postcodesHtml
                   }
                  }
              %}

              {% set localAuthoritiesTab =
                  {
                    label: "Local Authorities",
                    id: "local-authorities",
                    panel: {
                    html: localAuthoritiesHtml
                    }
                  }
<<<<<<< HEAD
              %}

=======
               %}
>>>>>>> master

        {% if isSuperAdmin %}

          {% set tabItems = (tabItems.push(postcodesTab),tabItems) %}
          {% set tabItems = (tabItems.push(localAuthoritiesTab),tabItems) %}

        {% endif %}
          {{ factTabs({
          id: 'Main',
            items: tabItems
            }) }}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
