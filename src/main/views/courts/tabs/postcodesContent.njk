{% from "govuk/components/details/macro.njk" import govukDetails %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}

<h2 class="govuk-heading-l">Postcodes</h2>

{{ csrfToken }}

{{ govukDetails({
  summaryText: "Help with postcodes",
  html: "Only full or partials postcodes are accepted. For example, SA1 1AA, or SA1."})
}}

{% set descriptionError = false %}
{% if email.adminEmailTypeId === '' %}
    {% set addError = { text: 'Type is required' } %}
{% endif %}

{% if errors|length %}
  {{ govukErrorSummary({
    titleText: "There is a problem",
    errorList: errors
  }) }}
{% endif %}

{% if searchValue == '' and updated and errors|length %}
   {% set addError = { text: 'One or more postcodes are required.' } %}
{% endif %}

{{ govukInput({
  label: {
    text: "Add postcodes:",
    classes: "govuk-label--s",
    isPageHeading: false
  },
  hint: {
    text: "Please add a comma separated list of postcodes.
    These can be case insensitive, and spaces are not significant."
  },
  id: "addNewPostcodes",
  name: "addNewPostcodes",
  errorMessage: addError
}) }}

{{ govukButton({
  text: "Add",
  name: "addPostcodes",
  type: "button",
  classes: "addPostcodes",
  attributes: { existingPostcodes: postcodes }
}) }}

<br><br>

{% for postcode in postcodes %}
  {{ postcode }}
{% endfor %}
